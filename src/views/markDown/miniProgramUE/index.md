# 小程序 用户体验

> 问题： 小程序在如何保持用户信息 并且 能够获取最新的用户信息

在我接手的一个项目里 前开发人员 在index.js onLunch方法里 请求了用户用户信息 根据后台返回判定用户登陆状态
并使用本地存储 记录用户登陆状态 但是 却使用数据实体存储用户信息 并在全页面引入使用

在此基础上 我继续进行里业务开发 就导致里诸多问题
+ 每个页面需要引入数据实例 多一行代码
+ 由于后台网关问题导致用户登陆超时时需要在每个页面进行用户登陆状态判定并重新请求数据
+ 由于项目没有进行请求接口封装导致 不能做请求拦击

#### 以这些问题为主导 作出相关的小程序项目构建时需要做到几点要求
1、数据封装必不可少 无论是请求前请求实体修改 还是 请求后数据清洗 都是非常方便且实际的 \
2、关于用户信息存储 既然使用了setStorageSync存储用户登陆状态 就直接使用此方式存储用户数据
在每个页面上都能使用 并且 不需要多余的引入代码 \
3、在以上两个关键点的基础上 就可以实现 用户数据的实时更新 在后台判定用户过期时http返回401后
在请求返回拦击里重新请求用户信息 并重新请求 或者提示用户过期 在此重新请求就设计到请求接口和请求入参的保存
用户过期则需要统一提示页面的支持并需要考虑用户体验 \
4、微信小程序设计理念是 使用户更多的体验 程序的功能 而不是每一个功能点都需要做限制
但是 项目是根据使用对象来进行设计于规划的 我们的项目主要服务于内部系统 所有可以在程序开始使用的是进行用户数据请求


